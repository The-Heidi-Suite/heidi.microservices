# RabbitMQ configuration for HEIDI Microservices

# Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

# Default user (override with environment variables in production)
default_user = heidi
default_pass = heidi_password

# Logging
log.console = true
log.console.level = info
log.file = false

# Memory and disk limits
vm_memory_high_watermark.relative = 0.4
disk_free_limit.absolute = 2GB

# Cluster settings (for future scaling)
cluster_formation.peer_discovery_backend = classic_config

# Management plugin
management.rates_mode = basic
management.log.exchange.level = info

# Queue and exchange defaults
queue_master_locator = min-masters

# Connection limits
connection_max = 4096
channel_max = 2048

# Heartbeat
heartbeat = 60

# Message TTL (optional - uncomment if needed)
# message_ttl = 86400000

# Queue TTL (optional - uncomment if needed)
# queue_ttl = 86400000

# Enable prometheus metrics
prometheus.tcp.port = 15692

# Additional plugins to enable
plugins = rabbitmq_management,rabbitmq_prometheus

# Default vhost
default_vhost = /

# Security (update in production)
ssl_options.cacertfile =
ssl_options.certfile =
ssl_options.keyfile =
ssl_options.verify = verify_none
ssl_options.fail_if_no_peer_cert = false

# Consumer timeout (milliseconds)
consumer_timeout = 1800000

# Frame max size (bytes)
frame_max = 131072
