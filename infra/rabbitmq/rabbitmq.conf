# RabbitMQ configuration for HEIDI Microservices

# Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

# Default user/password are configured via environment variables in docker-compose
# (RABBITMQ_DEFAULT_USER and RABBITMQ_DEFAULT_PASS)

# Logging
log.console = true
log.console.level = info
log.file = false

# Memory and disk limits
vm_memory_high_watermark.relative = 0.4
disk_free_limit.absolute = 2GB

# Cluster settings (for future scaling)
cluster_formation.peer_discovery_backend = classic_config

# Management plugin
management.rates_mode = basic

# Log exchange level (not under management namespace)
log.exchange.level = info

# Queue and exchange defaults
queue_master_locator = min-masters

# Connection limits
connection_max = 4096
channel_max = 2048

# Heartbeat
heartbeat = 60

# Message TTL (optional - uncomment if needed)
# message_ttl = 86400000

# Queue TTL (optional - uncomment if needed)
# queue_ttl = 86400000

# Enable prometheus metrics
prometheus.tcp.port = 15692

# Plugins are enabled via enabled_plugins file or environment variables
# This is handled by the RabbitMQ image or can be configured separately

# Default vhost is configured via RABBITMQ_DEFAULT_VHOST environment variable

# Security (update in production)
# SSL options are commented out - uncomment and configure when needed
# ssl_options.cacertfile = /path/to/ca_certificate.pem
# ssl_options.certfile = /path/to/server_certificate.pem
# ssl_options.keyfile = /path/to/server_key.pem
# ssl_options.verify = verify_peer
# ssl_options.fail_if_no_peer_cert = false

# Consumer timeout (milliseconds)
consumer_timeout = 1800000

# Frame max size (bytes)
frame_max = 131072
